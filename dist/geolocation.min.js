window.qq=window.qq||{},qq.maps=qq.maps||{},window.soso||(window.soso=qq),soso.maps||(soso.maps=qq.maps),qq.maps.Geolocation=function(){"use strict";var t=null,e=null,o=null,n=null,l=null,i="_geoIframe_"+Math.ceil(1e7*Math.random()),u=document.createElement("iframe"),a=null,s=null,c=null,r=null,m=function(m,d){return m?d?(u.setAttribute("id",i),u.setAttribute("src","http://apis.map.qq.com/tools/geolocation?key="+m+"&referer="+d+"_js"),u.setAttribute("style","display: none; width: 100%; height: 30%"),document.write(u.outerHTML),void window.addEventListener("message",function(i){var u=i.data;if(u&&"geolocation"==u.module)clearTimeout(r),t&&t(u),t=null,e=null,o&&o(u),o=null,n=null,l&&l(u);else{s=(new Date).getTime();var m=s-a;m>=c&&(e&&e(),e=null,t=null,clearTimeout(r)),n&&n(),n=null,o=null}},!1)):void alert("请输入referer！"):void alert("请输入key！")};return m.prototype.getLocation=function(o,n,l){t=o,e=n,a=(new Date).getTime(),c=l&&l.timeout?+l.timeout:1e4,clearTimeout(r),r=setTimeout(function(){e&&e(),e=null},c),document.getElementById(i).contentWindow.postMessage("getLocation","*")},m.prototype.getIpLocation=function(t,e){o=t,n=e,document.getElementById(i).contentWindow.postMessage("getLocation.robust","*")},m.prototype.watchPosition=function(t){l=t,document.getElementById(i).contentWindow.postMessage("watchPosition","*")},m.prototype.clearWatch=function(){l=null,document.getElementById(i).contentWindow.postMessage("clearWatch","*")},m}();