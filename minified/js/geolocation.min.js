window.qq=window.qq||{},qq.maps=qq.maps||{},window.soso||(window.soso=qq),soso.maps||(soso.maps=qq.maps),qq.maps.geolocation=function(){"use strict";var e=function(e){var t,n=String(window.document.location.href),o=new RegExp("(^|)"+e+"=([^&]*)(&|$)","gi").exec(n);return(t=o)?t[2]:""},t={},n=null,o=null,l=null,i=null,u=null,a="_geoIframe_"+Math.ceil(1e7*Math.random()),s=document.createElement("iframe"),c=null,r=null,m=null,d=null,w=e("key")?e("key"):"OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77",g=e("referer")?e("referer"):"myapp";return s.setAttribute("id",a),s.setAttribute("src","http://apis.map.qq.com/tools/geolocation?key="+w+"&referer="+g),s.setAttribute("style","display: none; width: 100%; height: 30%"),document.write(s.outerHTML),window.addEventListener("message",function(e){var t=e.data;if(t)clearTimeout(d),n&&n(t),n=null,o=null,l&&l(t),l=null,i=null,u&&u(t);else{r=(new Date).getTime();var a=r-c;a>=m&&(o&&o(),o=null,n=null,clearTimeout(d)),i&&i(),i=null,l=null}},!1),t.getLocation=function(e,t,l){n=e,o=t,c=(new Date).getTime(),m=l&&l.timeout?+l.timeout:6e3,clearTimeout(d),d=setTimeout(function(){o&&o(),o=null},m),document.getElementById(a).contentWindow.postMessage("getLocation","*")},t.getIpLocation=function(e,t){l=e,i=t,document.getElementById(a).contentWindow.postMessage("getLocation.robust","*")},t.watchPosition=function(e){u=e,document.getElementById(a).contentWindow.postMessage("watchPosition","*")},t.clearWatch=function(){u=null,document.getElementById(a).contentWindow.postMessage("clearWatch","*")},t}();